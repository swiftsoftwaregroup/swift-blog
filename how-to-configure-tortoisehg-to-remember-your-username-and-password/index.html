<!DOCTYPE html>
<html lang="en">
<head>  
<title>How to configure TortoiseHg to remember your username and password | Swift Software Group</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="Swift Software Group">
<meta name="generator" content="Jekyll v4.2.0">
<link rel="canonical" href="/how-to-configure-tortoisehg-to-remember-your-username-and-password/">


<link rel="stylesheet" href="/assets/css/frame.css">


<link rel="stylesheet" href="/assets/css/classes.css">

<link rel="alternate" href="/feed.xml" type="application/atom+xml" title="Swift Software Group">



<script src="//swiftsoftwaregroup.disqus.com/embed.js" async></script>



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-37864402-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-37864402-1');
</script>

</head>




<header>
  <a href="https://swiftsoftwaregroup.com" class="title">Swift Software Group</a>
  <nav><a aria-label="Blog" href="/" ><span aria-hidden="true">Blog</span></a><a aria-label="" href="" ><span aria-hidden="true"></span></a></nav>

</header>

<article>
  <header>
  <h1><a href="/how-to-configure-tortoisehg-to-remember-your-username-and-password/">How to configure TortoiseHg to remember your username and password</a></h1><time datetime="2013-01-05T00:00:00-08:00">January 05, 2013</time>
</header>

  <p>I have been playing with Hg (Mercurial) lately to see if it would be feasible to move our projects at <a href="http://www.primosoftware.com" title="Primo Software">Primo Software</a> from SVN (Subversion) to Mercurial. The things I am looking at are not just the version control capabilities, but also the tools that are available on Windows, Mac and Ubuntu. As part of the tools evaluation I have been playing with <a href="http://tortoisehg.bitbucket.org/" title="TortoiseHg">TortoiseHg</a>, which seems to be the recommended Hg visual tool for Windows.</p>

<p>This post here is about configuring TortoiseHg to remember the username and password and not ask you for those when you do Pull/Push to a remote repository. In the example below I use a Hg repository hosted on bitbucket.org, but the same configuration should be valid for any other remote repository.</p>

<p>After you first clone your repository with TortoiseHg you end up with this in your Hg configuration file (i.e. your .hg/hgrc file):</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[ui]</span>
<span class="py">username</span> <span class="p">=</span> <span class="s">Valentin Kantchev &lt;myemail@primosoftware.com&gt;</span>

<span class="nn">[paths]</span>
<span class="py">default</span> <span class="p">=</span> <span class="s">https://myusername@bitbucket.org/primosoftware/projectmap</span>
</code></pre></div></div>

<p>If you do Push and Pull from TortoiseHg it will take your username from the repo URL under the [paths] config, but it will keep asking for your password every time you do this.</p>

<p><img src="/assets/images/how-to-configure-tortoisehg-to-remember-your-username-and-password/workbench_1.png" alt="workbench_1" /></p>

<p>One of the solutions to this is to set your username and password in the TortoiseHg synchronization view:</p>

<p><img src="/assets/images/how-to-configure-tortoisehg-to-remember-your-username-and-password/workbench_2.png" alt="workbench_2" /></p>

<p>Now itâ€™s all good, but to make this work TortoiseHg creates a file called mercurial.ini under your Windows home directory, whichs is normally C:\Users\yourwindowsusername\. In my case the file had this inside:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Generated by TortoiseHg settings dialog
</span><span class="nn">[ui]</span>
<span class="py">username</span> <span class="p">=</span> <span class="s">Valentin Kantchev &lt;myemail@primosoftware.com&gt;</span>

<span class="nn">[auth]</span>
<span class="py">bitbucket.org.prefix</span> <span class="p">=</span> <span class="s">bitbucket.org</span>
<span class="py">bitbucket.org.username</span> <span class="p">=</span> <span class="s">myusername</span>
<span class="py">bitbucket.org.password</span> <span class="p">=</span> <span class="s">mypassword</span>
</code></pre></div></div>

<p>The problem with this file is that the password is stored in it as clear text.</p>

<p>Fortunately there is an easy workaround for that: TortoiseHg comes bundled with a <a href="http://mercurial.selenic.com/wiki/KeyringExtension" title="Keyring">Keyring</a> extension, designed for storing authentication passwords securely. However, the Keyring extension is not active by default. To activate it you have to add the following lines in your mercurial.ini file:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[extensions]</span>
<span class="py">mercurial_keyring</span><span class="p">=</span>
</code></pre></div></div>

<p>You can delete the password line under the [auth] section completely as it is not needed at this point. Your final mercurial.ini file should look like this:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Generated by TortoiseHg settings dialog
</span><span class="nn">[ui]</span>
<span class="py">username</span> <span class="p">=</span> <span class="s">Valentin Kantchev &lt;myemail@primosoftware.com&gt;</span>

<span class="nn">[auth]</span>
<span class="py">bitbucket.org.prefix</span> <span class="p">=</span> <span class="s">bitbucket.org</span>
<span class="py">bitbucket.org.username</span> <span class="p">=</span> <span class="s">myusername</span>

<span class="nn">[extensions]</span>
<span class="py">mercurial_keyring</span><span class="p">=</span>
</code></pre></div></div>

<p>Now you can also remove your username from the repository URL. In the .hg/hgrc file in your local repository folder, change this: https://myusername@nullbitbucket.org/primosoftware/projectmap to this: https://bitbucket.org/primosoftware/projectmap</p>

<p>Your final .hg/hgrc file should look like this:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[ui]</span>
<span class="py">username</span> <span class="p">=</span> <span class="s">Valentin Kantchev &lt;myemail@primosoftware.com&gt;</span>

<span class="nn">[paths]</span>
<span class="py">default</span> <span class="p">=</span> <span class="s">https://bitbucket.org/primosoftware/projectmap</span>
</code></pre></div></div>

<p>This completely removes all authentication info from your local repository folders. Your password is now stored in the Keyring and your user name is stored in <code class="language-plaintext highlighter-rouge">C:\Users\yourwindowsusername\mercurial.ini</code>. This way, for example, if you zip your local folder to send it to somebody you cannot accidentally send your source control authentication information with it.</p>

<p>Please note that after all changes TortoiseHg might ask you one more time for password. After that it will store and use the password from the Keyring.</p>

<p>Here is the last TortoiseHg screenshot. Notice that there is no authentication information visible anywhere:</p>

<p><img src="/assets/images/how-to-configure-tortoisehg-to-remember-your-username-and-password/workbench_3.png" alt="workbench_3" /></p>


  
    <hr>
    <div id="disqus_thread"></div>
    
    <noscript>Please enable JavaScript to view comments.</noscript>
  
</article>



<footer>
  <div>&copy; Swift Software Group</div>
  <nav><a aria-label="Mail" href="mailto:hello@swiftsoftwaregroup.com" ><svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#envelope"></use></svg></a><a aria-label="Github" href="https://github.com/swiftsoftwaregroup" ><svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#github"></use></svg></a><a aria-label="Subscribe" href="/feed.xml" ><svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#rss"></use></svg></a></nav>

</footer>


</html>
