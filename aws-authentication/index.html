<!DOCTYPE html>
<html lang="en">
<head>  
<title>AWS Authentication | Swift Software Group</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="Swift Software Group">
<meta name="generator" content="Jekyll v4.2.0">
<link rel="canonical" href="/aws-authentication/">


<link rel="stylesheet" href="/assets/css/frame.css">


<link rel="stylesheet" href="/assets/css/classes.css">

<link rel="alternate" href="/feed.xml" type="application/atom+xml" title="Swift Software Group">



<script src="//swiftsoftwaregroup.disqus.com/embed.js" async></script>



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-37864402-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-37864402-1');
</script>

</head>




<header>
  <a href="/" class="title">Swift Software Group</a>
  <nav><a aria-label="Blog" href="/" ><span aria-hidden="true">Blog</span></a><a aria-label="" href="" ><span aria-hidden="true"></span></a></nav>

</header>

<article>
  <header>
  <h1><a href="/aws-authentication/">AWS Authentication</a></h1><time datetime="2020-12-30T00:00:00-08:00">December 30, 2020</time>
</header>

  <p>Set up your AWS credentials. For more information, see <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html">Configuration and credential file settings</a>.</p>

<p>Make sure you go through this setup first:</p>

<ol>
  <li><a href="/setup-macos-for-aws-cloud-devops">Setup macOS for AWS Cloud DevOps</a></li>
</ol>

<blockquote>
  <p>Scripts are <code class="language-plaintext highlighter-rouge">bash</code></p>
</blockquote>

<h2 id="aws-cli">AWS CLI</h2>

<p>Run <code class="language-plaintext highlighter-rouge">aws configure</code> to configure access key ID and secret access key, default region. Request access key ID and secret access key from you AWS admin.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># To configure the default profile:</span>
aws configure

<span class="c"># To configure a specific named profile, e.g. `swift`:</span>
aws configure <span class="nt">--profile</span> swift
</code></pre></div></div>

<ul>
  <li>Specify Access key ID</li>
  <li>Specify  Secret access key</li>
  <li>Set <code class="language-plaintext highlighter-rouge">us-west-2</code> for region</li>
  <li>Set <code class="language-plaintext highlighter-rouge">json</code> for output format</li>
</ul>

<p><strong>IMPORTANT</strong>: Disable CLI pager. Otherwise you will not be able to parse AWS CLI json responses:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws configure <span class="nb">set </span>cli_pager <span class="s2">""</span>
</code></pre></div></div>

<p>The files generated by the CLI for a default profile configured with <code class="language-plaintext highlighter-rouge">aws configure</code> looks similar to the following.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> ~/.aws/credentials
</code></pre></div></div>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[default]</span>
<span class="py">aws_access_key_id</span><span class="p">=</span><span class="s">QWERTYUIOPASDFGHJKLZ</span>
<span class="py">aws_secret_access_key</span><span class="p">=</span><span class="s">abcdEfgHijklm/NOPQARS/BxcfghGHEXAMPLEKEY</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> ~/.aws/config
</code></pre></div></div>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[default]</span>
<span class="py">region</span><span class="p">=</span><span class="s">us-west-2</span>
<span class="py">output</span><span class="p">=</span><span class="s">json</span>
</code></pre></div></div>

<p>Test:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 describe-instances
</code></pre></div></div>

<h2 id="ec2-key-pair">EC2 Key Pair</h2>

<p>Generate EC2 SSH key pair:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen <span class="nt">-t</span> rsa <span class="nt">-C</span> <span class="s2">"aws-ec2-key"</span> <span class="nt">-f</span> ~/.ssh/aws-ec2-key
</code></pre></div></div>

<p>Import the key in AWS EC2:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 import-key-pair <span class="nt">--key-name</span> <span class="s2">"aws-ec2-key"</span> <span class="nt">--public-key-material</span> fileb://~/.ssh/aws-ec2-key.pub
</code></pre></div></div>

  
    <hr>
    <div id="disqus_thread"></div>
    
    <noscript>Please enable JavaScript to view comments.</noscript>
  
</article>



<footer>
  <div>&copy; Swift Software Group</div>
  <nav><a aria-label="Mail" href="mailto:hello@swiftsoftwaregroup.com" ><svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#envelope"></use></svg></a><a aria-label="Github" href="https://github.com/swiftsoftwaregroup" ><svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#github"></use></svg></a><a aria-label="Subscribe" href="/feed.xml" ><svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#rss"></use></svg></a></nav>

</footer>


</html>
